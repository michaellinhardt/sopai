# AI Engineer Review: File Writing Rules Analysis

## Agreement with Findings

**Verdict: AGREE with all four gaps identified.**

### Gap 1: No Default Rule - AGREE (HIGH)
The current "File Locations" section describes *categories* of files and their destinations, but lacks procedural clarity. When an agent receives a task like "write a summary", there is no explicit instruction to default to `./agts/wkf.xxx/`. The agent must infer this, which leads to inconsistent behavior.

### Gap 2: No Dual-Write Mechanism - AGREE (HIGH)
Critical gap. Project files written to explicit paths (e.g., `.claude/agents/foo.md`) are lost to workflow tracking. The dual-write pattern ensures:
- File lands where user expects
- Workflow retains audit trail

### Gap 3: No Copy Naming Convention - AGREE (MEDIUM)
The proposed `.copy.md` suffix is sensible. However, I recommend a refinement: use `.copy` as a *type* in the existing naming convention, not just a suffix. This maintains consistency.

Current: `[ID].[name].[type].md`
Copy: `[ID].[name].copy.md` (where `copy` becomes the type)

This avoids patterns like `03.config.context.copy.md` (type collision).

### Gap 4: Soft Language - AGREE (LOW)
The word "remain" in "Project files: remain in project location" is passive/descriptive. Compare to Sub-Agent Rules which use "NEVER", "ONLY", "MUST". Enforcement language is needed.

---

## Additional Observations

### Observation A: Scope Ambiguity
The dual-write rule applies to *sub-agents* (who write to workflow folders). Orchestrators create the workflow folder itself - their writes are already in the correct location. The new rules should clarify scope.

### Observation B: Copy Trigger Condition
When does dual-write trigger? Proposed condition:
- File path is OUTSIDE `./agts/wkf.xxx/`

This avoids redundant copies when writing workflow files.

### Observation C: Token Efficiency
The analysis proposes a "Rationale" line. For a CLAUDE.md consumed by LLMs, rationale increases token cost. Consider omitting or compressing.

---

## Proposed Refinements to Solution

1. **Place rules in Shared Rules section** - applies to both roles
2. **Use constraint language** - MUST, ALWAYS, NEVER
3. **Define copy type explicitly** - `.copy` as the type field
4. **Add trigger condition** - only when path is outside wkf folder
5. **Keep it dense** - no rationale prose, rules only

---

## Verdict

The analysis correctly identifies the gaps. The proposed solution is directionally correct but benefits from the refinements above. Proceeding to draft the revised CLAUDE.md.
